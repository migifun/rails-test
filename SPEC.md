# 受付アプリ 仕様書

来客の受付を管理するシンプルな Web アプリケーション。

## 画面一覧

### 1. 受付フォーム (`GET /`)
- 誰でもアクセス可能（認証不要）
- 以下の入力フィールドを持つフォーム
  - お名前（テキスト、必須、最大255文字）
  - 会社名（テキスト、必須、最大255文字）
  - ご用件（セレクトボックス、必須）
    - 打ち合わせ
    - 面接
    - 納品・受取
    - その他
- 送信すると受付データを保存し、呼出画面にリダイレクト
- ログイン済みの場合のみ「受付一覧を見る」リンクを表示

### 2. 呼出画面 (`GET /reception/{id}/calling`)
- 誰でもアクセス可能（認証不要）
- 受付完了のメッセージを表示
  - 来客の名前、会社名、用件、受付時刻
- 5秒後に受付フォームへ自動遷移

### 3. ログイン画面 (`GET /login`)
- メールアドレスとパスワードで認証
- 認証成功 → 受付一覧へリダイレクト
- 認証失敗 → エラーメッセージを表示

### 4. 受付一覧 (`GET /reception`)
- 管理者のみアクセス可能（認証 + 管理者権限が必要）
- 未ログインの場合はログイン画面にリダイレクト
- ログイン済みでも管理者でなければ 403 エラー
- 受付データを新しい順にテーブル表示
  - ID、名前、会社名、用件、受付時刻
- 各行に削除ボタン（確認ダイアログ付き）
- ログアウトボタン

## データモデル

### users テーブル
| カラム | 型 | 説明 |
|---|---|---|
| id | 整数（自動採番） | 主キー |
| name | 文字列 | ユーザー名 |
| email | 文字列（ユニーク） | メールアドレス |
| password | 文字列（ハッシュ化） | パスワード |
| is_admin | 真偽値（デフォルト: false） | 管理者フラグ |
| created_at | 日時 | 作成日時 |
| updated_at | 日時 | 更新日時 |

### receptions テーブル
| カラム | 型 | 説明 |
|---|---|---|
| id | 整数（自動採番） | 主キー |
| name | 文字列 | 来客の名前 |
| company | 文字列 | 会社名 |
| purpose | 文字列 | 用件（meeting / interview / delivery / other） |
| created_at | 日時 | 受付日時 |
| updated_at | 日時 | 更新日時 |

## API / ルーティング

| メソッド | パス | 認証 | 説明 |
|---|---|---|---|
| GET | `/` | 不要 | 受付フォーム表示 |
| POST | `/reception` | 不要 | 受付データ保存 → 呼出画面へリダイレクト |
| GET | `/reception/{id}/calling` | 不要 | 呼出画面表示 |
| GET | `/reception` | 管理者のみ | 受付一覧表示 |
| DELETE | `/reception/{id}` | 管理者のみ | 受付データ削除 → 一覧へリダイレクト |
| GET | `/login` | 不要 | ログイン画面表示 |
| POST | `/login` | 不要 | ログイン処理 |
| POST | `/logout` | 不要 | ログアウト → トップへリダイレクト |

## 認証・認可

- セッションベースの認証
- ユーザーの `is_admin` フラグで管理者を判定
- 管理者のみが受付一覧の閲覧・削除を実行可能

## 外部連携

### Slack 通知（任意）
- 受付登録時に Slack の Incoming Webhook で通知を送信
- Webhook URL は環境変数で管理（`SLACK_WEBHOOK_URL`）
- 未設定の場合はスキップ（エラーにならない）
- 通知内容: 来客の名前、会社名、用件

## 初期データ

| メール | パスワード | 管理者 |
|---|---|---|
| admin@example.com | password | はい |

## デザイン方針

- CSS フレームワークは使わず、手書きのシンプルなスタイル
- 背景色: `#f0f4f8`、アクセントカラー: `#4299e1`（青系）
- フォーム要素はカード風（白背景 + 角丸 + シャドウ）
- レスポンシブは最低限（max-width で中央寄せ）
